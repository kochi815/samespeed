<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>ねこ計算サバイバル</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <button id="bgmToggleBtn">🔊</button>

    <div id="gameContainer">
        
        <div id="modeSelectScreen" class="screen">
            <h1 class="title-logo">🐱 ねこ計算サバイバル ⏱️</h1>
            <p class="subtitle">めざせ！計算マスター</p>

            <button id="showRankingBtn" class="main-menu-btn">🏆 ランキングを見る</button>

            <div class="mode-grid">
                <div class="grade-section">
                    <button class="mode-btn" data-type="addsub1">
                        かんたん 計算
                        <span class="best-badge" id="badge-addsub1">👑 --</span>
                    </button>
                    <button class="mode-btn" data-type="addsub1_hole">
                        かんたん 穴あき
                        <span class="best-badge" id="badge-addsub1_hole">👑 --</span>
                    </button>
                    <button class="mode-btn" data-type="addsub2">
                        ふつう 計算
                        <span class="best-badge" id="badge-addsub2">👑 --</span>
                    </button>
                    <button class="mode-btn" data-type="addsub2_hole">
                        ふつう 穴あき
                        <span class="best-badge" id="badge-addsub2_hole">👑 --</span>
                    </button>
                    <button class="mode-btn" data-type="mul">
                        かけ算 (九九)
                        <span class="best-badge" id="badge-mul">👑 --</span>
                    </button>
                    <button class="mode-btn" data-type="mul_hole">
                        かけ算 穴あき
                        <span class="best-badge" id="badge-mul_hole">👑 --</span>
                    </button>
                    <button class="mode-btn" data-type="div">
                        わり算
                        <span class="best-badge" id="badge-div">👑 --</span>
                    </button>
                    <button class="mode-btn" data-type="div_hole">
                        わり算 穴あき
                        <span class="best-badge" id="badge-div_hole">👑 --</span>
                    </button>
                </div>
            </div>
        </div>

        <div id="rankingViewScreen" class="screen">
            <h2>🏆 みんなの記録 🏆</h2>
            <p class="ranking-instruction">見たいモードを選んでね</p>
            
            <div class="ranking-tabs">
                <button class="rank-tab-btn active" data-target="addsub1">1年<br>計算</button>
                <button class="rank-tab-btn" data-target="addsub1_hole">1年<br>穴あき</button>
                <button class="rank-tab-btn" data-target="mul">4年<br>かけ算</button>
                <button class="rank-tab-btn" data-target="div">4年<br>わり算</button>
                </div>

            <div class="ranking-display-box">
                <h3 id="rankingViewTitle">1年 かんたん計算</h3>
                <table id="fullRankingTable">
                    <thead>
                        <tr>
                            <th>順位</th>
                            <th>名前</th>
                            <th>スコア</th>
                        </tr>
                    </thead>
                    <tbody id="fullRankingBody">
                        </tbody>
                </table>
            </div>

            <button id="backFromRankingBtn" class="sub-btn">もどる</button>
        </div>

        <div id="gameScreen" class="screen">
            <div id="timeGaugeHeader">
                <div id="timeGaugeContainer">
                    <div id="timeGaugeBar"></div>
                </div>
                <div id="timeText">40.00</div>
            </div>

            <div id="scoreHeader">たおした数: <span id="currentScore">0</span></div>

            <button id="quitBtn">🏠 やめる</button>

            <div id="enemyArea">
                <div id="enemyCharacter">😼</div>
                <div id="effectContainer"></div>
            </div>

            <div id="questionArea">
                <div id="questionText"></div>
                <div id="answerChoices"></div>
            </div>
        </div>

        <div id="resultScreen" class="screen">
            <h2>タイムアップ！</h2>
            
            <div class="final-score-area">
                <div>今回のきろく</div>
                <div id="finalScoreDisplay">0 ひき</div>
            </div>

            <div id="rankInInputArea" style="display: none;">
                <div class="rank-in-msg">🎉 自己ベスト更新！ 🎉</div>
                <p>だれの記録かな？</p>
                <div class="user-select-buttons">
                    <button class="user-btn" data-name="パパ">👨 パパ</button>
                    <button class="user-btn" data-name="ママ">👩 ママ</button>
                    <button class="user-btn" data-name="ゆき">👧 ゆき</button>
                    <button class="user-btn" data-name="あお">👶 あお</button>
                    <button class="user-btn" data-name="ゲスト">👤 ゲスト</button>
                </div>
            </div>

            <div id="rankingBoardArea">
                <h3>🏆 ランキング 🏆</h3>
                <div id="rankingListName" style="margin-bottom: 5px; font-size: 0.9em; color:#666;"></div>
                <table id="rankingTable">
                    <thead>
                        <tr>
                            <th>順位</th>
                            <th>名前</th>
                            <th>スコア</th>
                        </tr>
                    </thead>
                    <tbody id="rankingListBody">
                        </tbody>
                </table>
            </div>

            <div class="result-buttons">
                <button id="retryBtn" class="action-btn">もう一回！</button>
                <button id="backToTitleBtn" class="sub-btn">モード選択へ</button>
            </div>
        </div>

    </div>

    <div id="feedbackOverlay"></div>
    <div id="comboOverlay"></div>

    <script src="sound.js"></script>
    <script src="script.js"></script>
</body>
</html>